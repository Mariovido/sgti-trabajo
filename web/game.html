<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuatro En Raya</title>
    <link rel="stylesheet" href="resources/styles/main.css"> 
    <link rel="stylesheet" href="resources/styles/tabla.css"> 
    <script src="resources/js/game.js"></script>
    <!--<script src="resources/js/async.js"></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <header class="main-header">
        <nav class="main-header__nav">
            <ul class="main-header__item-list">
                <li class="main-header__item"><a href="partidas.html">Mis partidas</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <div id="jugadores">
            <span id="local">Jugador1</span>: <span id='puntosj1'>0</span> vs.
            <span id="remoto">Jugador2</span>:<span id='puntosj2'>0</span>
        </div>
    </br>
        <table id="tablero">
            <tbody><tr>
                <td id="00" onclick="paint()"></td>
                <td id="01" onclick="paint()"></td>
                <td id="02" onclick="paint()"></td>
                <td id="03" onclick="paint()"></td>
                <td id="04" onclick="paint()"></td>
                <td id="05" onclick="paint()"></td>
                <td id="06" onclick="paint()"></td>
                <td id="07" onclick="paint()"></td>
            </tr>
            <tr>
                <td id="10" onclick="paint()"></td>
                <td id="11" onclick="paint()"></td>
                <td id="12" onclick="paint()"></td>
                <td id="13" onclick="paint()"></td>
                <td id="14" onclick="paint()"></td>
                <td id="15" onclick="paint()"></td>
                <td id="16" onclick="paint()"></td>
                <td id="17" onclick="paint()"></td>
            </tr>
            <tr>
                <td id="20" onclick="paint()"></td>
                <td id="21" onclick="paint()"></td>
                <td id="22" onclick="paint()"></td>
                <td id="23" onclick="paint()"></td>
                <td id="24" onclick="paint()"></td>
                <td id="25" onclick="paint()"></td>
                <td id="26" onclick="paint()"></td>
                <td id="27" onclick="paint()"></td>
            </tr>
            <tr>
                <td id="30" onclick="paint()"></td>
                <td id="31" onclick="paint()"></td>
                <td id="32" onclick="paint()"></td>
                <td id="33" onclick="paint()"></td>
                <td id="34" onclick="paint()"></td>
                <td id="35" onclick="paint()"></td>
                <td id="36" onclick="paint()"></td>
                <td id="37" onclick="paint()"></td>
            </tr>
            <tr>
                <td id="40" onclick="paint()"></td>
                <td id="41" onclick="paint()"></td>
                <td id="42" onclick="paint()"></td>
                <td id="43" onclick="paint()"></td>
                <td id="44" onclick="paint()"></td>
                <td id="45" onclick="paint()"></td>
                <td id="46" onclick="paint()"></td>
                <td id="47" onclick="paint()"></td>
            </tr>
            <tr>
                <td id="50" onclick="paint()"></td>
                <td id="51" onclick="paint()"></td>
                <td id="52" onclick="paint()"></td>
                <td id="53" onclick="paint()"></td>
                <td id="54" onclick="paint()"></td>
                <td id="55" onclick="paint()"></td>
                <td id="56" onclick="paint()"></td>
                <td id="57" onclick="paint()"></td>
            </tr>
            <tr>
                <td id="60" onclick="paint()"></td>
                <td id="61" onclick="paint()"></td>
                <td id="62" onclick="paint()"></td>
                <td id="63" onclick="paint()"></td>
                <td id="64" onclick="paint()"></td>
                <td id="65" onclick="paint()"></td>
                <td id="66" onclick="paint()"></td>
                <td id="67" onclick="paint()"></td>
            </tr>
        </tbody></table>
        <script>paintInit()</script>
        <script>  
            $(document).on("click", "td", function() { // Cuando hay un "click" en un td se ejecuta la siguiente funcion
var id = $(this).attr('id');
var col = id.charAt(1);
$.ajax({
url     : 'https://openclassrooms.com/en',
method     : 'POST',
data     : {COLUMNA : col },
success    : paint()});
});
        </script>

        <script>
            function refresh(){
                //refrescar tablero si el otro jugador ha jugado
                //enviar aqui peticion asincrona
                alert("refresco");
            }

            setInterval(function(){
            refresh() // se refresca cada 5 segundos
            }, 5000);
        </script>
    </main>
</body>
</html>